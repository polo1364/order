<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>便當點餐系統</title>
<style>
  body { font-family: sans-serif; max-width: 600px; margin: auto; padding: 1em; }
  table, th, td { border: 1px solid #ccc; border-collapse: collapse; padding: 6px 10px; }
  th { background: #f0f0f0; }
  #dateArea { display: none; margin-top: 1em; }
</style>
</head>
<body>

<h2>便當點餐系統</h2>

<label>店家：
  <select id="storeSelect" onchange="loadMenu()">
    <option value="">請選擇店家</option>
    <option value="新香味（林園）">新香味（林園）</option>
    <option value="品馨肉燥">品馨肉燥</option>
  </select>
</label>

<div id="menuArea"></div>

<div id="dateArea">
  <input type="date" id="orderDate">
  <button onclick="submitOrder()">送出</button>
</div>

<script>
function loadMenu() {
  const store = document.getElementById('storeSelect').value;
  if (!store) return;

  // ✅ 你的 JSON 檔位址
  fetch('https://polo1364.github.io/order/menu.json')
    .then(res => res.json())
    .then(data => {
      const menu = data[store];
      const menuArea = document.getElementById('menuArea');
      menuArea.innerHTML = "";
      if (menu) {
        let html = "<table><tr><th>品項</th><th>選取</th></tr>";
        for (let item in menu) {
          html += `<tr><td>${item}</td><td><input type='radio' name='menuItem' value='${item}'></td></tr>`;
        }
        html += "</table>";
        menuArea.innerHTML = html;
        document.getElementById('dateArea').style.display = "block";
      }
    })
    .catch(err => {
      console.error("❌ 無法載入菜單", err);
      alert("無法載入菜單，請稍後再試");
    });
}

function submitOrder() {
  const store = document.getElementById('storeSelect').value;
  const sel = document.querySelector("input[name='menuItem']:checked");
  const date = document.getElementById('orderDate').value;

  if (!store || !sel || !date) {
    alert("請填寫所有欄位！");
    return;
  }

  const item = sel.value;
  alert(`已選擇：${store} / ${item} / ${date}`);
  // ✅ 這裡可加上寫入 Firebase 或 Google Sheets 的程式碼
}
</script>

</body>
</html>